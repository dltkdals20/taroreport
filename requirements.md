# íƒ€ë¡œ í•´ì„ ë¦¬í¬íŠ¸ í”Œë«í¼ ìš”êµ¬ì‚¬í•­ ì •ë¦¬

## í”„ë¡œì íŠ¸ ê°œìš”
- íƒ€ë¡œ ë¦¬ë”ê°€ ê³ ê° ì¹´ë“œ í•´ì„ì„ ì‘ì„±í•˜ê³  ì „ì†¡
- êµ¬ë§¤ìëŠ” ì¹´ë“œ í™•ì¸ â†’ "ëˆŒëŸ¬ë³´ê¸°"ë¡œ í•´ì„ í™•ì¸
- ëª¨ë°”ì¼ ìµœì í™”(ì›¹ì•± ë˜ëŠ” ë°˜ì‘í˜•)

## ì‚¬ìš©ì ì—­í• 
- íƒ€ë¡œ ë¦¬ë”(í•´ì„ ì‘ì„±ì): ìƒë‹´ ëª©ë¡ í™•ì¸, í•´ì„ ì‘ì„±/ì „ì†¡
- êµ¬ë§¤ì(ê³ ê°): ì¹´ë“œ ë’¤ì§‘ê¸°, í•´ì„ í™•ì¸, ê³µìœ 

## 1. íƒ€ë¡œ ë¦¬ë” í˜ì´ì§€ (í•´ì„ ì‘ì„±)
### 1-1. ëŒ€ê¸°/ì™„ë£Œ ìƒë‹´ ëª©ë¡
- ê³ ê°ëª…, ìš”ì²­ì¼, ì§ˆë¬¸ ë‚´ìš© í‘œì‹œ
- [í•´ì„ ì‘ì„±í•˜ê¸°] ë²„íŠ¼ìœ¼ë¡œ ìƒì„¸ ì´ë™
- ì™„ë£Œ/ëŒ€ê¸° ìƒíƒœ êµ¬ë¶„

### 1-2. í•´ì„ ì‘ì„± í™”ë©´
- ìƒë‹¨: ê³ ê°ëª…, ìš”ì²­ì¼, ê³ ê° ì§ˆë¬¸
- ì¹´ë“œ ì˜ì—­(ë°˜ë³µ/ê°€ë³€)
  - ì¹´ë“œ N, ìœ„ì¹˜ ì˜ë¯¸ ì…ë ¥(ìë™ì™„ì„±)
  - ì¹´ë“œ ì´ë¯¸ì§€, ì¹´ë“œëª…, ì •/ì—­ë°©í–¥ í‘œì‹œ
  - í•´ì„ ì…ë ¥ í…ìŠ¤íŠ¸ ì˜ì—­
  - [ì‚­ì œ] ë²„íŠ¼
  - ë“œë˜ê·¸ì•¤ë“œë¡­ìœ¼ë¡œ ì¹´ë“œ ìˆœì„œ ë³€ê²½
- í•˜ë‹¨:
  - [+ ì¹´ë“œ ì¶”ê°€]
  - ì¢…í•© ì¡°ì–¸ ì…ë ¥(ì„ íƒ)
  - [ì„ì‹œì €ì¥] [ë¯¸ë¦¬ë³´ê¸°] [ì „ì†¡]

### 1-3. ì¹´ë“œ ì¶”ê°€ ëª¨ë‹¬
- ê²€ìƒ‰ ê¸°ëŠ¥
- ì¹´í…Œê³ ë¦¬ ë¶„ë¥˜: ë©”ì´ì €(22), ì™„ë“œ/ì»µ/ì†Œë“œ/íœíƒ€í´(ê° 14)
- ì¹´ë“œ ì´ë¯¸ì§€ ê·¸ë¦¬ë“œ
- ì •ë°©í–¥/ì—­ë°©í–¥ ì„ íƒ
- [ì·¨ì†Œ] [ì¶”ê°€]

### 1-4. í¸ì˜ ê¸°ëŠ¥
- ìì£¼ ì“°ëŠ” ìŠ¤í”„ë ˆë“œ í…œí”Œë¦¿ ì €ì¥/ë¶ˆëŸ¬ì˜¤ê¸°
  - ì˜ˆ: ê³¼ê±°/í˜„ì¬/ë¯¸ë˜, ë‚˜/ìƒëŒ€/ê´€ê³„, ìƒí™©/ì¥ì• ë¬¼/ì¡°ì–¸
- ìœ„ì¹˜ ì˜ë¯¸ ìë™ì™„ì„±(ë‚˜, ê³¼ê±°, í˜„ì¬, ë¯¸ë˜, ìƒëŒ€ë°©, ì¡°ì–¸ ë“±)
- ìì£¼ ì“°ëŠ” ë¬¸êµ¬ ì €ì¥(ì„ íƒ)

## 2. êµ¬ë§¤ì í˜ì´ì§€ (ê²°ê³¼ í™•ì¸)
### 2-1. ë¦¬í¬íŠ¸ ë©”ì¸ í™”ë©´
- ìƒë‹¨: ê³ ê°ëª… + ìƒë‹´ì¼, ìŠ¤í”„ë ˆë“œ ì •ë³´(ì˜ˆ: 3ì¥ ìŠ¤í”„ë ˆë“œ)
- ì¹´ë“œ ë°°ì¹˜(ì¹´ë“œ ìˆ˜ì— ë”°ë¥¸ ë ˆì´ì•„ì›ƒ)
  - 1ì¥: ì¤‘ì•™, 3ì¥: ê°€ë¡œ, 5ì¥+: ê·¸ë¦¬ë“œ/ê°€ë¡œ ìŠ¤í¬ë¡¤
- ì¹´ë“œ ìœ„ì— ìœ„ì¹˜ ì˜ë¯¸ í‘œì‹œ
- ì´ˆê¸° ìƒíƒœ: ì¹´ë“œ ë’·ë©´
- ì¹´ë“œ í´ë¦­ ì‹œ: ë’¤ì§‘ê¸° ì• ë‹ˆë©”ì´ì…˜ â†’ ì•ë©´ í‘œì‹œ

### 2-2. ì¹´ë“œ ìƒì„¸(ë’¤ì§‘ì€ í›„)
- ì¹´ë“œ ì´ë¯¸ì§€(í™”ë©´ 60~70%, ì¤‘ì•™)
- ìœ„ì¹˜ ì˜ë¯¸ í‘œì‹œ(ì˜ˆ: ğŸ“ ê³¼ê±°)
- ì¹´ë“œëª… + ì •/ì—­ë°©í–¥ ë±ƒì§€
  - ì •ë°©í–¥: íŒŒë‘/ì´ˆë¡ [ì •ë°©í–¥ â–²]
  - ì—­ë°©í–¥: ë¹¨ê°•/ë³´ë¼ [ì—­ë°©í–¥ â–¼]
- [ëˆŒëŸ¬ë³´ê¸° ğŸ‘‡] ë²„íŠ¼

### 2-3. í•´ì„ í‘œì‹œ
- íƒ€ë¡œ ë¦¬ë” í•´ì„ í…ìŠ¤íŠ¸ í‘œì‹œ
- í¼ì¹¨ ì• ë‹ˆë©”ì´ì…˜(Accordion/Fade-in)

### 2-4. ì¢…í•© ì¡°ì–¸
- í•´ì„ í•˜ë‹¨ì— ë³„ë„ ê°•ì¡° ë°•ìŠ¤

### 2-5. í•˜ë‹¨ ë²„íŠ¼
- [ê³µìœ í•˜ê¸°] (ì¹´ì¹´ì˜¤í†¡, ì¸ìŠ¤íƒ€ ìŠ¤í† ë¦¬ ë“±)
- [ì²˜ìŒìœ¼ë¡œ]

## 3. ë””ìì¸/UX ìš”êµ¬ì‚¬í•­
- ë‹¤í¬ ëª¨ë“œ ê¸°ë³¸(ê²€ì •/ì§„í•œ ë³´ë¼/ë„¤ì´ë¹„ ë°°ê²½, í°ìƒ‰ í…ìŠ¤íŠ¸)
- ì‹ ë¹„ë¡œìš´ íƒ€ë¡œ ë¶„ìœ„ê¸°
- ëª¨ë°”ì¼ ì„¸ë¡œí˜• ì›í˜ì´ì§€ ìµœì í™”
- ì• ë‹ˆë©”ì´ì…˜: ì¹´ë“œ ë’¤ì§‘ê¸°, í•´ì„ í¼ì¹¨(Fade-in/Slide-down)
- ê³¼í•˜ì§€ ì•Šê²Œ, ìŠ¤í‚µ ê°€ëŠ¥
- ì´ë¯¸ì§€: WebP í¬ë§· ê¶Œì¥(í˜„ì¬ ë©”ì´ì € ì•„ë¥´ì¹´ë‚˜ëŠ” Sacred Textsì˜ JPG ì‚¬ìš©)

## 4. ë°ì´í„° êµ¬ì¡° (JSON)
```json
{
  "cards": [
    {
      "id": 0,
      "name_en": "The Fool",
      "name_kr": "ê´‘ëŒ€",
      "category": "major",
      "image_url": "https://www.sacred-texts.com/tarot/pkt/img/ar00.jpg"
    }
  ]
}
```

```json
{
  "report": {
    "id": "report_001",
    "customer_name": "ê¹€OO",
    "request_date": "2024-01-15",
    "question": "ì—°ì• ìš´ì´ ê¶ê¸ˆí•´ìš”",
    "status": "pending | completed",
    "cards": [
      {
        "card_id": 0,
        "position": "ê³¼ê±°",
        "direction": "upright",
        "interpretation": "í•´ì„ ë‚´ìš©..."
      },
      {
        "card_id": 6,
        "position": "í˜„ì¬",
        "direction": "reversed",
        "interpretation": "í•´ì„ ë‚´ìš©..."
      }
    ],
    "overall_advice": "ì¢…í•© ì¡°ì–¸ ë‚´ìš©..."
  }
}
```

## 5. ê¸°ìˆ  ìŠ¤íƒ(ê¶Œì¥)
- Frontend: React ë˜ëŠ” Next.js
- ìŠ¤íƒ€ì¼: Tailwind CSS
- ì• ë‹ˆë©”ì´ì…˜: Framer Motion
- ìƒíƒœê´€ë¦¬: Zustand ë˜ëŠ” React Context
- ë°ì´í„°: JSON íŒŒì¼ ë˜ëŠ” Firebase/Supabase

## 6. ìš°ì„ ìˆœìœ„
1. íƒ€ë¡œ ë¦¬ë”© í•´ì„ ì‘ì„± ê¸°ëŠ¥
2. êµ¬ë§¤ì ê²°ê³¼ í™•ì¸ í˜ì´ì§€(ìŠˆí¼ë² ì´ìŠ¤ ì—°ê²°, ë§í¬ ì „ë‹¬)
3. ê³µìœ  ê¸°ëŠ¥

## 7. êµ¬í˜„ ì½”ë“œ (Vite + React)
### í”„ë¡œì íŠ¸ êµ¬ì¡°
- package.json
- vite.config.js
- index.html
- src/main.jsx
- src/App.jsx
- src/styles.css
- src/contexts/ReportContext.jsx
- src/hooks/useLocalStorage.js
- src/data/cards.json
- src/data/reports.json
- src/pages/Home.jsx
- src/pages/Reader.jsx
- src/pages/Buyer.jsx
- src/components/CardAddModal.jsx
- src/components/CardEditorItem.jsx
- src/components/TemplateBar.jsx
- src/components/SnippetBar.jsx
- src/components/BuyerReport.jsx

### ì‹¤í–‰ ë°©ë²•
```bash
npm install
npm run dev
```

### ì´ë¯¸ì§€ ì¤€ë¹„
- `/public/images/tarot/*.webp` ê²½ë¡œì— ì‹¤ì œ ì¹´ë“œ ì´ë¯¸ì§€ë¥¼ ë„£ìœ¼ë©´ ìë™ìœ¼ë¡œ ë°˜ì˜ë©ë‹ˆë‹¤.
- í˜„ì¬ëŠ” íŒŒì¼ì´ ì—†ì„ ê²½ìš°ë¥¼ ëŒ€ë¹„í•´ SVG ê¸°ë°˜ì˜ ê¸°ë³¸ í”Œë ˆì´ìŠ¤í™€ë”ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
- ë©”ì´ì € ì•„ë¥´ì¹´ë‚˜ ìƒ˜í”Œì€ Sacred Textsì˜ Rider-Waite JPGë¥¼ ì§ì ‘ ì°¸ì¡°í•©ë‹ˆë‹¤.

### package.json
```json
{
  "name": "tarot-report",
  "private": true,
  "version": "0.1.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "preview": "vite preview"
  },
  "dependencies": {
    "react": "^18.3.1",
    "react-dom": "^18.3.1",
    "react-router-dom": "^6.26.2"
  },
  "devDependencies": {
    "@vitejs/plugin-react": "^4.3.1",
    "vite": "^5.4.8"
  }
}
```

### vite.config.js
```js
import { defineConfig } from 'vite';
import react from '@vitejs/plugin-react';

export default defineConfig({
  plugins: [react()],
  server: {
    port: 5173,
    host: true
  }
});
```

### index.html
```html
<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tarot Report Studio</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
  </body>
</html>
```

### src/main.jsx
```jsx
import React from 'react';
import ReactDOM from 'react-dom/client';
import App from './App.jsx';
import './styles.css';

ReactDOM.createRoot(document.getElementById('root')).render(
  <React.StrictMode>
    <App />
  </React.StrictMode>
);
```

### src/App.jsx
```jsx
import { BrowserRouter, Route, Routes } from 'react-router-dom';
import Home from './pages/Home.jsx';
import Reader from './pages/Reader.jsx';
import Buyer from './pages/Buyer.jsx';
import { ReportProvider } from './contexts/ReportContext.jsx';

export default function App() {
  return (
    <BrowserRouter>
      <ReportProvider>
        <Routes>
          <Route path="/" element={<Home />} />
          <Route path="/reader" element={<Reader />} />
          <Route path="/buyer" element={<Buyer />} />
        </Routes>
      </ReportProvider>
    </BrowserRouter>
  );
}
```

### src/styles.css
```css
@import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=DM+Sans:wght@400;500;700&display=swap');

:root {
  color-scheme: dark;
  --bg-0: #0b0f14;
  --bg-1: #101826;
  --bg-2: #151f30;
  --surface: #162033;
  --surface-2: #1a2740;
  --stroke: rgba(255, 255, 255, 0.08);
  --text-0: #f5f7fb;
  --text-1: #c7d0e0;
  --text-2: #9aa4b5;
  --accent-1: #f6c356;
  --accent-2: #3dd6c0;
  --danger: #e86a6a;
  --glow: rgba(246, 195, 86, 0.3);
  --radius-lg: 20px;
  --radius-md: 14px;
  --radius-sm: 10px;
  --shadow: 0 20px 45px rgba(0, 0, 0, 0.45);
  --font-display: 'Cinzel', serif;
  --font-body: 'DM Sans', sans-serif;
}

* {
  box-sizing: border-box;
}

body {
  margin: 0;
  font-family: var(--font-body);
  color: var(--text-0);
  background-color: var(--bg-0);
  background-image:
    radial-gradient(circle at 20% 20%, rgba(246, 195, 86, 0.08), transparent 40%),
    radial-gradient(circle at 80% 10%, rgba(61, 214, 192, 0.08), transparent 35%),
    radial-gradient(circle at 50% 70%, rgba(93, 78, 148, 0.18), transparent 55%),
    linear-gradient(140deg, #0b0f14 10%, #0f1728 45%, #1b1c32 100%);
  min-height: 100vh;
}

img {
  max-width: 100%;
  display: block;
}

a {
  color: inherit;
  text-decoration: none;
}

h1, h2, h3 {
  font-family: var(--font-display);
  margin: 0 0 8px;
  font-weight: 600;
  letter-spacing: 0.02em;
}

p {
  margin: 0;
}

button,
input,
textarea,
select {
  font-family: inherit;
  color: inherit;
}

input,
textarea,
select {
  background: var(--surface-2);
  border: 1px solid var(--stroke);
  border-radius: var(--radius-sm);
  padding: 12px 14px;
  width: 100%;
  color: var(--text-0);
}

textarea {
  min-height: 120px;
  resize: vertical;
}

select {
  appearance: none;
  background-image: linear-gradient(45deg, transparent 50%, var(--text-1) 50%),
    linear-gradient(135deg, var(--text-1) 50%, transparent 50%);
  background-position: calc(100% - 20px) 55%, calc(100% - 14px) 55%;
  background-size: 6px 6px;
  background-repeat: no-repeat;
}

.page {
  max-width: 1200px;
  margin: 0 auto;
  padding: 32px 20px 80px;
}

.eyebrow {
  font-size: 12px;
  letter-spacing: 0.4em;
  color: var(--accent-2);
  text-transform: uppercase;
  margin-bottom: 10px;
}

.subtitle {
  color: var(--text-1);
  max-width: 520px;
  line-height: 1.6;
}

.muted {
  color: var(--text-2);
}

.btn {
  border: 1px solid transparent;
  padding: 10px 18px;
  border-radius: 999px;
  font-weight: 600;
  cursor: pointer;
  transition: transform 0.2s ease, box-shadow 0.2s ease, background 0.2s ease;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
}

.btn.primary {
  background: linear-gradient(120deg, #f6c356, #f58f7f);
  color: #1b1d2b;
  box-shadow: 0 10px 20px rgba(246, 195, 86, 0.3);
}

.btn.ghost {
  background: rgba(255, 255, 255, 0.04);
  border-color: var(--stroke);
  color: var(--text-0);
}

.btn.danger {
  background: rgba(232, 106, 106, 0.2);
  border-color: rgba(232, 106, 106, 0.4);
  color: #ffd6d6;
}

.btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.btn:hover:not(:disabled) {
  transform: translateY(-1px);
  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
}

.icon-btn {
  border: none;
  background: transparent;
  color: var(--text-1);
  font-size: 16px;
  cursor: pointer;
}

.icon-btn.danger {
  color: var(--danger);
}

.panel {
  background: rgba(15, 22, 36, 0.8);
  border: 1px solid var(--stroke);
  border-radius: var(--radius-lg);
  padding: 20px;
  box-shadow: var(--shadow);
}

.top-bar {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: 16px;
  margin-bottom: 24px;
}

.top-actions {
  display: flex;
  gap: 12px;
  align-items: center;
}

.hero {
  padding: 60px 24px;
  border-radius: var(--radius-lg);
  background: linear-gradient(135deg, rgba(22, 32, 51, 0.9), rgba(26, 27, 48, 0.9));
  border: 1px solid var(--stroke);
  box-shadow: var(--shadow);
}

.hero h1 {
  font-size: clamp(28px, 4vw, 42px);
}

.hero-actions {
  margin-top: 24px;
  display: flex;
  gap: 12px;
  flex-wrap: wrap;
}

.feature-grid {
  margin-top: 24px;
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: 16px;
}

.feature-grid article {
  padding: 20px;
  border-radius: var(--radius-md);
  background: rgba(15, 22, 36, 0.6);
  border: 1px solid var(--stroke);
}

.reader-grid {
  display: grid;
  grid-template-columns: minmax(280px, 1fr) minmax(320px, 2fr);
  gap: 20px;
}

.report-list .panel-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 12px;
  margin-bottom: 16px;
}

.list {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.list-item {
  border: 1px solid transparent;
  background: rgba(255, 255, 255, 0.02);
  border-radius: var(--radius-md);
  padding: 14px 16px;
  text-align: left;
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 12px;
  cursor: pointer;
  transition: border 0.2s ease, transform 0.2s ease;
}

.list-item.active {
  border-color: rgba(246, 195, 86, 0.5);
  box-shadow: 0 0 0 1px rgba(246, 195, 86, 0.2);
}

.list-title {
  font-weight: 700;
}

.list-meta {
  color: var(--text-2);
  font-size: 12px;
}

.list-question {
  color: var(--text-1);
  font-size: 14px;
  margin-top: 6px;
}

.status {
  font-size: 12px;
  padding: 4px 10px;
  border-radius: 999px;
  border: 1px solid var(--stroke);
  color: var(--text-1);
}

.status.pending {
  border-color: rgba(61, 214, 192, 0.4);
  color: #9ef0df;
}

.status.completed {
  border-color: rgba(246, 195, 86, 0.4);
  color: #f6c356;
}

.pill-row {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}

.pill {
  border-radius: 999px;
  border: 1px solid var(--stroke);
  padding: 6px 12px;
  font-size: 12px;
  background: transparent;
  color: var(--text-1);
  cursor: pointer;
}

.pill.active {
  background: rgba(61, 214, 192, 0.2);
  border-color: rgba(61, 214, 192, 0.5);
  color: #c6fff4;
}

.pill.danger.active {
  background: rgba(232, 106, 106, 0.2);
  border-color: rgba(232, 106, 106, 0.5);
}

.editor-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 16px;
}

.question-box {
  background: rgba(255, 255, 255, 0.04);
  border-radius: var(--radius-md);
  padding: 16px;
  border: 1px solid var(--stroke);
  margin-bottom: 20px;
}

.question-box .label {
  font-size: 12px;
  color: var(--text-2);
  margin-bottom: 6px;
}

.template-bar,
.snippet-bar {
  margin-bottom: 20px;
  padding: 16px;
  border-radius: var(--radius-md);
  border: 1px solid var(--stroke);
  background: rgba(255, 255, 255, 0.03);
}

.section-title {
  font-weight: 600;
}

.section-subtitle {
  color: var(--text-2);
  font-size: 13px;
  margin-top: 4px;
}

.template-controls {
  display: flex;
  gap: 8px;
  margin-top: 12px;
  flex-wrap: wrap;
}

.editor-cards {
  display: flex;
  flex-direction: column;
  gap: 16px;
  margin-bottom: 16px;
}

.editor-card {
  border-radius: var(--radius-md);
  border: 1px solid var(--stroke);
  padding: 16px;
  background: rgba(17, 26, 40, 0.8);
}

.editor-card-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 10px;
  margin-bottom: 12px;
}

.drag-handle {
  font-size: 18px;
  color: var(--text-2);
  cursor: grab;
}

.card-index {
  font-weight: 700;
}

.card-subtitle {
  font-size: 12px;
  color: var(--text-2);
}

.editor-card-body {
  display: flex;
  flex-direction: column;
  gap: 14px;
}

.field {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.card-visual {
  display: grid;
  grid-template-columns: 120px 1fr;
  gap: 16px;
  align-items: center;
}

.card-preview {
  border-radius: var(--radius-sm);
  border: 1px solid var(--stroke);
  overflow: hidden;
  background: rgba(255, 255, 255, 0.05);
  min-height: 160px;
}

.card-preview.empty {
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--text-2);
  font-size: 12px;
}

.placeholder {
  padding: 8px;
  text-align: center;
}

.card-actions {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
  margin-top: 10px;
}

.card-title {
  font-weight: 700;
}

.card-title-en {
  font-size: 12px;
  color: var(--text-2);
}

.editor-actions {
  display: flex;
  gap: 10px;
  margin-top: 16px;
  flex-wrap: wrap;
}

.snippet-input {
  display: flex;
  gap: 8px;
  margin-top: 12px;
}

.snippet-list {
  margin-top: 12px;
  display: grid;
  gap: 8px;
}

.snippet-item {
  background: rgba(255, 255, 255, 0.02);
  border: 1px solid var(--stroke);
  border-radius: var(--radius-sm);
  padding: 10px 12px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
}

.snippet-actions {
  display: flex;
  gap: 6px;
}

.modal-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(5, 7, 12, 0.7);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10;
  padding: 24px;
}

.modal {
  width: min(860px, 100%);
  max-height: 90vh;
  background: var(--surface);
  border-radius: var(--radius-lg);
  border: 1px solid var(--stroke);
  box-shadow: var(--shadow);
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.modal.preview {
  width: min(960px, 100%);
  overflow-y: auto;
}

.modal-header,
.modal-footer {
  padding: 16px 20px;
  border-bottom: 1px solid var(--stroke);
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.modal-footer {
  border-top: 1px solid var(--stroke);
  border-bottom: none;
}

.modal-controls {
  padding: 16px 20px 0;
  display: grid;
  gap: 12px;
}

.direction-toggle {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}

.card-grid {
  padding: 16px 20px 20px;
  display: grid;
  gap: 12px;
  grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
  overflow-y: auto;
}

.card-option {
  border-radius: var(--radius-md);
  border: 1px solid var(--stroke);
  background: rgba(255, 255, 255, 0.02);
  padding: 10px;
  text-align: left;
  cursor: pointer;
}

.card-option.selected {
  border-color: rgba(61, 214, 192, 0.6);
  box-shadow: 0 0 0 1px rgba(61, 214, 192, 0.3);
}

.card-thumb {
  border-radius: var(--radius-sm);
  overflow: hidden;
  background: rgba(255, 255, 255, 0.05);
  min-height: 120px;
}

.card-name-kr {
  font-weight: 600;
  margin-top: 8px;
}

.card-name-en {
  font-size: 12px;
  color: var(--text-2);
}

.card-meta {
  margin-top: 8px;
}

.buyer-report {
  margin-top: 20px;
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.report-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: 12px;
}

.header-actions {
  display: flex;
  gap: 8px;
  align-items: center;
}

.card-layout {
  display: grid;
  gap: 16px;
}

.card-layout.layout-one {
  grid-template-columns: 1fr;
  justify-items: center;
}

.card-layout.layout-three {
  grid-template-columns: repeat(3, minmax(140px, 1fr));
}

.card-layout.layout-many {
  grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
}

.buyer-card {
  padding: 16px;
  border-radius: var(--radius-md);
  border: 1px solid var(--stroke);
  background: rgba(255, 255, 255, 0.02);
  text-align: center;
  display: grid;
  gap: 10px;
}

.flip-card {
  perspective: 1000px;
  width: 100%;
  max-width: 200px;
  margin: 0 auto;
  cursor: pointer;
}

.flip-card-inner {
  position: relative;
  width: 100%;
  aspect-ratio: 2 / 3;
  transition: transform 0.6s ease;
  transform-style: preserve-3d;
}

.flip-card.is-flipped .flip-card-inner {
  transform: rotateY(180deg);
}

.flip-card-face {
  position: absolute;
  inset: 0;
  backface-visibility: hidden;
  border-radius: var(--radius-sm);
  overflow: hidden;
  border: 1px solid var(--stroke);
  display: flex;
  align-items: center;
  justify-content: center;
}

.flip-card-face.back {
  background: radial-gradient(circle at top, rgba(246, 195, 86, 0.25), transparent 55%),
    linear-gradient(160deg, #1b1f2e, #0f1523);
  color: var(--text-1);
  font-family: var(--font-display);
  letter-spacing: 0.2em;
}

.flip-card-face.front {
  background: rgba(0, 0, 0, 0.2);
  transform: rotateY(180deg);
}

.card-back {
  font-size: 14px;
  text-transform: uppercase;
}

.card-front-fallback {
  font-size: 12px;
  color: var(--text-2);
}

.buyer-card-meta {
  display: flex;
  justify-content: center;
  gap: 10px;
  align-items: center;
  flex-wrap: wrap;
}

.position {
  font-size: 12px;
  color: var(--text-1);
}

.direction {
  font-size: 12px;
  padding: 4px 10px;
  border-radius: 999px;
  border: 1px solid var(--stroke);
}

.direction.up {
  color: #93f5cf;
  border-color: rgba(147, 245, 207, 0.4);
}

.direction.rev {
  color: #ff9aa8;
  border-color: rgba(255, 154, 168, 0.4);
}

.interpretation {
  max-height: 0;
  overflow: hidden;
  opacity: 0;
  transition: max-height 0.4s ease, opacity 0.4s ease;
  color: var(--text-1);
  line-height: 1.6;
}

.interpretation.open {
  max-height: 300px;
  opacity: 1;
}

.advice-box {
  padding: 18px;
  border-radius: var(--radius-md);
  border: 1px solid rgba(246, 195, 86, 0.4);
  background: rgba(246, 195, 86, 0.08);
}

.report-actions {
  display: flex;
  gap: 12px;
  justify-content: center;
  flex-wrap: wrap;
}

.toast {
  position: fixed;
  bottom: 24px;
  left: 50%;
  transform: translateX(-50%);
  background: rgba(15, 22, 36, 0.9);
  border: 1px solid var(--stroke);
  padding: 10px 16px;
  border-radius: 999px;
  color: var(--text-0);
  z-index: 20;
  box-shadow: var(--shadow);
}

.empty-state {
  color: var(--text-2);
  text-align: center;
}

@media (max-width: 960px) {
  .reader-grid {
    grid-template-columns: 1fr;
  }

  .top-bar {
    flex-direction: column;
  }

  .card-visual {
    grid-template-columns: 1fr;
  }

  .card-layout.layout-three {
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
  }
}

@media (max-width: 600px) {
  .page {
    padding: 24px 16px 60px;
  }

  .hero {
    padding: 36px 20px;
  }

  .top-actions {
    width: 100%;
    justify-content: space-between;
  }

  .modal {
    width: 100%;
  }
}

@media (prefers-reduced-motion: reduce) {
  .flip-card-inner,
  .interpretation {
    transition: none;
  }
}
```

### src/contexts/ReportContext.jsx
```jsx
import { createContext, useContext, useMemo } from 'react';
import { useLocalStorage } from '../hooks/useLocalStorage.js';
import initialReports from '../data/reports.json';

const ReportContext = createContext(null);

export function ReportProvider({ children }) {
  const [reports, setReports] = useLocalStorage('tarotReports', initialReports);
  const [activeReportId, setActiveReportId] = useLocalStorage(
    'tarotActiveReportId',
    initialReports[0]?.id ?? null
  );

  const value = useMemo(() => {
    const updateReport = (id, updater) => {
      setReports((prev) =>
        prev.map((report) => {
          if (report.id !== id) {
            return report;
          }
          const next = typeof updater === 'function' ? updater(report) : { ...report, ...updater };
          return next;
        })
      );
    };

    const replaceReports = (nextReports) => {
      setReports(nextReports);
      if (nextReports.length > 0 && !nextReports.find((item) => item.id === activeReportId)) {
        setActiveReportId(nextReports[0].id);
      }
    };

    return {
      reports,
      activeReportId,
      setActiveReportId,
      updateReport,
      replaceReports
    };
  }, [activeReportId, reports, setActiveReportId, setReports]);

  return <ReportContext.Provider value={value}>{children}</ReportContext.Provider>;
}

export function useReportContext() {
  const context = useContext(ReportContext);
  if (!context) {
    throw new Error('useReportContext must be used within ReportProvider');
  }
  return context;
}
```

### src/hooks/useLocalStorage.js
```js
import { useEffect, useState } from 'react';

export function useLocalStorage(key, initialValue) {
  const [value, setValue] = useState(() => {
    if (typeof window === 'undefined') {
      return initialValue;
    }
    try {
      const stored = window.localStorage.getItem(key);
      return stored ? JSON.parse(stored) : initialValue;
    } catch (error) {
      return initialValue;
    }
  });

  useEffect(() => {
    try {
      window.localStorage.setItem(key, JSON.stringify(value));
    } catch (error) {
      // Ignore write errors (private mode, storage full, etc.)
    }
  }, [key, value]);

  return [value, setValue];
}
```

### src/data/cards.json
```json
[
  {
    "id": 0,
    "name_en": "The Fool",
    "name_kr": "ê´‘ëŒ€",
    "category": "major",
    "image_url": "https://www.sacred-texts.com/tarot/pkt/img/ar00.jpg"
  },
  {
    "id": 1,
    "name_en": "The Magician",
    "name_kr": "ë§ˆë²•ì‚¬",
    "category": "major",
    "image_url": "https://www.sacred-texts.com/tarot/pkt/img/ar01.jpg"
  },
  {
    "id": 2,
    "name_en": "The High Priestess",
    "name_kr": "ì—¬ì‚¬ì œ",
    "category": "major",
    "image_url": "https://www.sacred-texts.com/tarot/pkt/img/ar02.jpg"
  },
  {
    "id": 3,
    "name_en": "The Empress",
    "name_kr": "ì—¬í™©ì œ",
    "category": "major",
    "image_url": "https://www.sacred-texts.com/tarot/pkt/img/ar03.jpg"
  },
  {
    "id": 4,
    "name_en": "The Emperor",
    "name_kr": "í™©ì œ",
    "category": "major",
    "image_url": "https://www.sacred-texts.com/tarot/pkt/img/ar04.jpg"
  },
  {
    "id": 31,
    "name_en": "Ace of Wands",
    "name_kr": "ì™„ë“œ ì—ì´ìŠ¤",
    "category": "wands",
    "image_url": "/images/tarot/wands_ace.webp"
  },
  {
    "id": 32,
    "name_en": "Two of Wands",
    "name_kr": "ì™„ë“œ 2",
    "category": "wands",
    "image_url": "/images/tarot/wands_two.webp"
  },
  {
    "id": 41,
    "name_en": "Ace of Cups",
    "name_kr": "ì»µ ì—ì´ìŠ¤",
    "category": "cups",
    "image_url": "/images/tarot/cups_ace.webp"
  },
  {
    "id": 42,
    "name_en": "Two of Cups",
    "name_kr": "ì»µ 2",
    "category": "cups",
    "image_url": "/images/tarot/cups_two.webp"
  },
  {
    "id": 51,
    "name_en": "Ace of Swords",
    "name_kr": "ì†Œë“œ ì—ì´ìŠ¤",
    "category": "swords",
    "image_url": "/images/tarot/swords_ace.webp"
  },
  {
    "id": 52,
    "name_en": "Two of Swords",
    "name_kr": "ì†Œë“œ 2",
    "category": "swords",
    "image_url": "/images/tarot/swords_two.webp"
  },
  {
    "id": 61,
    "name_en": "Ace of Pentacles",
    "name_kr": "íœíƒ€í´ ì—ì´ìŠ¤",
    "category": "pentacles",
    "image_url": "/images/tarot/pentacles_ace.webp"
  },
  {
    "id": 62,
    "name_en": "Two of Pentacles",
    "name_kr": "íœíƒ€í´ 2",
    "category": "pentacles",
    "image_url": "/images/tarot/pentacles_two.webp"
  }
]

```

### src/data/reports.json
```json
[
  {
    "id": "report_001",
    "customer_name": "ê¹€OO",
    "request_date": "2024-01-15",
    "question": "ì—°ì• ìš´ì´ ê¶ê¸ˆí•´ìš”",
    "status": "pending",
    "spread_name": "ê³¼ê±°/í˜„ì¬/ë¯¸ë˜",
    "cards": [
      {
        "card_id": 0,
        "position": "ê³¼ê±°",
        "direction": "upright",
        "interpretation": "ìƒˆë¡œìš´ ì‹œì‘ì„ í–¥í•œ ìˆœìˆ˜í•œ ë§ˆìŒì´ ìˆì—ˆì–´ìš”. ìƒí™©ì„ ê°€ë³ê²Œ ë°”ë¼ë³´ë©° ê¸°íšŒë¥¼ ì—´ì—ˆë˜ ì‹œê¸°ì…ë‹ˆë‹¤."
      },
      {
        "card_id": 1,
        "position": "í˜„ì¬",
        "direction": "reversed",
        "interpretation": "ì˜ì‚¬ê²°ì •ì´ ì§€ì—°ë˜ê±°ë‚˜ í™•ì‹ ì´ ë¶€ì¡±í•´ ë³´ì…ë‹ˆë‹¤. ìƒëŒ€ì—ê²Œ ì „ë‹¬í•˜ê³  ì‹¶ì€ ì˜ë„ê°€ íë ¤ì§ˆ ìˆ˜ ìˆì–´ìš”."
      },
      {
        "card_id": 2,
        "position": "ë¯¸ë˜",
        "direction": "upright",
        "interpretation": "ì§ê´€ì´ ì¤‘ìš”í•œ ì‹œì ì…ë‹ˆë‹¤. ë§í•˜ì§€ ì•Šì•„ë„ ëŠê»´ì§€ëŠ” ê°ì •ë“¤ì„ ë¯¿ì–´ë³´ì„¸ìš”."
      }
    ],
    "overall_advice": "ë„ˆë¬´ ì„œë‘ë¥´ì§€ ë§ê³  íë¦„ì„ ê´€ì°°í•´ ì£¼ì„¸ìš”. ëŒ€í™”ë¥¼ ì‹œì‘í•  íƒ€ì´ë°ì„ ì •í•˜ë©´ ê´€ê³„ê°€ ë¶€ë“œëŸ½ê²Œ í’€ë¦½ë‹ˆë‹¤."
  },
  {
    "id": "report_002",
    "customer_name": "ë°•OO",
    "request_date": "2024-01-12",
    "question": "ì´ì§ ìš´ì„ ë³´ê³  ì‹¶ì–´ìš”",
    "status": "completed",
    "spread_name": "ìƒí™©/ì¥ì• ë¬¼/ì¡°ì–¸",
    "cards": [
      {
        "card_id": 31,
        "position": "ìƒí™©",
        "direction": "upright",
        "interpretation": "ìƒˆë¡œìš´ ì‹œë„ë¥¼ í–¥í•œ ì—´ì •ì´ ë†’ìŠµë‹ˆë‹¤. ê¸°íšŒë¥¼ ì¡ê¸° ìœ„í•œ ì¤€ë¹„ê°€ ì˜ ë˜ì–´ ìˆì–´ìš”."
      },
      {
        "card_id": 52,
        "position": "ì¥ì• ë¬¼",
        "direction": "reversed",
        "interpretation": "ê²°ì • ì¥ì• ê°€ ìƒê¸°ê±°ë‚˜ ê· í˜•ì„ ì¡ê¸° ì–´ë ¤ìš´ ìƒíƒœì…ë‹ˆë‹¤. ìš°ì„ ìˆœìœ„ë¥¼ ë‹¤ì‹œ ì •í•´ë³´ì„¸ìš”."
      },
      {
        "card_id": 61,
        "position": "ì¡°ì–¸",
        "direction": "upright",
        "interpretation": "ì¬ì •ì  ì•ˆì •ê³¼ í˜„ì‹¤ì ì¸ ê³„íšì´ í•µì‹¬ì…ë‹ˆë‹¤. ì¡°ê±´ê³¼ ë³´ìƒì„ êµ¬ì²´ì ìœ¼ë¡œ í™•ì¸í•˜ì„¸ìš”."
      }
    ],
    "overall_advice": "ì¶©ë¶„í•œ ì •ë³´ ìˆ˜ì§‘ í›„ ì›€ì§ì´ë©´ ë¦¬ìŠ¤í¬ê°€ ì¤„ì–´ë“­ë‹ˆë‹¤. ì¶”ì²œì„œë‚˜ í¬íŠ¸í´ë¦¬ì˜¤ë¥¼ ë³´ê°•í•´ë³´ì„¸ìš”."
  }
]
```

### src/pages/Home.jsx
```jsx
import { Link } from 'react-router-dom';

export default function Home() {
  return (
    <div className="page home">
      <header className="hero">
        <p className="eyebrow">TAROT REPORT STUDIO</p>
        <h1>íƒ€ë¡œ í•´ì„ ë¦¬í¬íŠ¸ í”Œë«í¼</h1>
        <p className="subtitle">
          ë¦¬ë”ëŠ” ë¹ ë¥´ê²Œ í•´ì„ì„ ì‘ì„±í•˜ê³ , êµ¬ë§¤ìëŠ” ì¹´ë“œ ë’¤ì§‘ê¸°ì™€ í•¨ê»˜
          í•´ì„ì„ í™•ì¸í•˜ëŠ” ëª°ì…í˜• ë¦¬í¬íŠ¸ ê²½í—˜ì„ ì œê³µí•©ë‹ˆë‹¤.
        </p>
        <div className="hero-actions">
          <Link className="btn primary" to="/reader">ë¦¬ë” í˜ì´ì§€</Link>
          <Link className="btn ghost" to="/buyer">êµ¬ë§¤ì ë¯¸ë¦¬ë³´ê¸°</Link>
        </div>
      </header>
      <section className="feature-grid">
        <article>
          <h3>ëª¨ë°”ì¼ ì¤‘ì‹¬</h3>
          <p>ì¹´ë“œ ë’¤ì§‘ê¸°ì™€ í•´ì„ í¼ì¹¨ ì• ë‹ˆë©”ì´ì…˜ì´ ëª¨ë°”ì¼ì—ì„œë„ ë¶€ë“œëŸ½ê²Œ ë™ì‘í•©ë‹ˆë‹¤.</p>
        </article>
        <article>
          <h3>ë¦¬ë” ìƒì‚°ì„±</h3>
          <p>ìŠ¤í”„ë ˆë“œ í…œí”Œë¦¿ê³¼ ìë™ì™„ì„±ìœ¼ë¡œ í•´ì„ ì‘ì„± ì†ë„ë¥¼ ë†’ì…ë‹ˆë‹¤.</p>
        </article>
        <article>
          <h3>ê°ì„± ë””ìì¸</h3>
          <p>ë‹¤í¬ í†¤ê³¼ ì€ì€í•œ ê¸€ë¡œìš°ë¡œ ì‹ ë¹„ë¡œìš´ íƒ€ë¡œ ë¬´ë“œë¥¼ ì‚´ë ¸ìŠµë‹ˆë‹¤.</p>
        </article>
      </section>
    </div>
  );
}
```

### src/pages/Reader.jsx
```jsx
import { useMemo, useState } from 'react';
import { useNavigate } from 'react-router-dom';
import cardsData from '../data/cards.json';
import { useReportContext } from '../contexts/ReportContext.jsx';
import { useLocalStorage } from '../hooks/useLocalStorage.js';
import CardAddModal from '../components/CardAddModal.jsx';
import CardEditorItem from '../components/CardEditorItem.jsx';
import TemplateBar from '../components/TemplateBar.jsx';
import SnippetBar from '../components/SnippetBar.jsx';
import BuyerReport from '../components/BuyerReport.jsx';

const POSITION_SUGGESTIONS = [
  'ê³¼ê±°',
  'í˜„ì¬',
  'ë¯¸ë˜',
  'ë‚˜',
  'ìƒëŒ€',
  'ê´€ê³„',
  'ìƒí™©',
  'ì¥ì• ë¬¼',
  'ì¡°ì–¸',
  'ê°€ëŠ¥ì„±',
  'ê°ì •',
  'ì˜ë„'
];

const DEFAULT_TEMPLATES = [
  { name: 'ê³¼ê±°/í˜„ì¬/ë¯¸ë˜', positions: ['ê³¼ê±°', 'í˜„ì¬', 'ë¯¸ë˜'] },
  { name: 'ë‚˜/ìƒëŒ€/ê´€ê³„', positions: ['ë‚˜', 'ìƒëŒ€', 'ê´€ê³„'] },
  { name: 'ìƒí™©/ì¥ì• ë¬¼/ì¡°ì–¸', positions: ['ìƒí™©', 'ì¥ì• ë¬¼', 'ì¡°ì–¸'] },
  { name: 'í˜„ì¬/ìˆ¨ì€ê°ì •/í–‰ë™', positions: ['í˜„ì¬', 'ìˆ¨ì€ê°ì •', 'í–‰ë™'] }
];

export default function Reader() {
  const navigate = useNavigate();
  const { reports, activeReportId, setActiveReportId, updateReport } = useReportContext();
  const [statusFilter, setStatusFilter] = useState('pending');
  const [isModalOpen, setModalOpen] = useState(false);
  const [modalTargetIndex, setModalTargetIndex] = useState(null);
  const [previewOpen, setPreviewOpen] = useState(false);
  const [activeField, setActiveField] = useState(null);
  const [toast, setToast] = useState('');
  const [dragIndex, setDragIndex] = useState(null);

  const [templates, setTemplates] = useLocalStorage('tarotTemplates', DEFAULT_TEMPLATES);
  const [snippets, setSnippets] = useLocalStorage('tarotSnippets', []);

  const cardsById = useMemo(() => new Map(cardsData.map((card) => [card.id, card])), []);

  const filteredReports = reports.filter((report) => report.status === statusFilter);
  const activeReport = reports.find((report) => report.id === activeReportId) || reports[0];

  const showToast = (message) => {
    setToast(message);
    window.setTimeout(() => setToast(''), 2000);
  };

  const handleSelectReport = (id) => {
    setActiveReportId(id);
  };

  const updateCardEntry = (index, patch) => {
    if (!activeReport) return;
    updateReport(activeReport.id, (report) => {
      const nextCards = report.cards.map((card, cardIndex) =>
        cardIndex === index ? { ...card, ...patch } : card
      );
      return { ...report, cards: nextCards };
    });
  };

  const addCardEntry = (cardId, direction) => {
    if (!activeReport) return;
    updateReport(activeReport.id, (report) => {
      const entry = {
        card_id: cardId,
        position: '',
        direction,
        interpretation: ''
      };
      const nextCards = [...report.cards];
      if (modalTargetIndex !== null) {
        const target = nextCards[modalTargetIndex] || entry;
        nextCards[modalTargetIndex] = { ...target, card_id: cardId, direction };
      } else {
        nextCards.push(entry);
      }
      return { ...report, cards: nextCards };
    });
    setModalOpen(false);
    setModalTargetIndex(null);
  };

  const removeCardEntry = (index) => {
    if (!activeReport) return;
    updateReport(activeReport.id, (report) => {
      const nextCards = report.cards.filter((_, cardIndex) => cardIndex !== index);
      return { ...report, cards: nextCards };
    });
  };

  const handleDragStart = (event, index) => {
    setDragIndex(index);
    event.dataTransfer.effectAllowed = 'move';
  };

  const handleDragOver = (event) => {
    event.preventDefault();
  };

  const handleDrop = (event, index) => {
    event.preventDefault();
    if (dragIndex === null || dragIndex === index || !activeReport) {
      return;
    }
    updateReport(activeReport.id, (report) => {
      const nextCards = [...report.cards];
      const [moved] = nextCards.splice(dragIndex, 1);
      nextCards.splice(index, 0, moved);
      return { ...report, cards: nextCards };
    });
    setDragIndex(null);
  };

  const applyPositions = (positions, spreadName) => {
    if (!activeReport || positions.length === 0) {
      return;
    }
    updateReport(activeReport.id, (report) => {
      const mapped = positions.map((position, index) => {
        const existing = report.cards[index] || {
          card_id: null,
          position: '',
          direction: 'upright',
          interpretation: ''
        };
        return { ...existing, position };
      });
      const extras = report.cards.slice(positions.length);
      return { ...report, spread_name: spreadName, cards: [...mapped, ...extras] };
    });
  };

  const handleApplyTemplate = (name) => {
    if (!activeReport) return;
    const template = templates.find((item) => item.name === name);
    if (!template) return;
    applyPositions(template.positions, template.name);
    showToast('ìŠ¤í”„ë ˆë“œë¥¼ ì ìš©í–ˆìŠµë‹ˆë‹¤.');
  };

  const handleApplyCustomTemplate = () => {
    if (!activeReport) return;
    const input = window.prompt('í¬ì§€ì…˜ì„ ì‰¼í‘œë¡œ êµ¬ë¶„í•´ ì…ë ¥í•´ ì£¼ì„¸ìš”\\nì˜ˆ: ê³¼ê±°,í˜„ì¬,ë¯¸ë˜');
    if (!input) return;
    const positions = input
      .split(',')
      .map((item) => item.trim())
      .filter(Boolean);
    if (positions.length === 0) return;
    applyPositions(positions, 'ì‚¬ìš©ì ì§€ì •');
    showToast('ì‚¬ìš©ì ì§€ì • ìŠ¤í”„ë ˆë“œë¥¼ ì ìš©í–ˆìŠµë‹ˆë‹¤.');
  };

  const handleSaveTemplate = () => {
    if (!activeReport) return;
    const positions = activeReport.cards.map((card) => card.position).filter(Boolean);
    const name = window.prompt('í…œí”Œë¦¿ ì´ë¦„ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”');
    if (!name || positions.length === 0) return;
    setTemplates((prev) => [...prev, { name, positions }]);
    showToast('í…œí”Œë¦¿ì„ ì €ì¥í–ˆìŠµë‹ˆë‹¤.');
  };

  const handleInsertSnippet = (snippet) => {
    if (!activeReport || !activeField) return;
    if (activeField.type === 'card') {
      updateReport(activeReport.id, (report) => {
        const nextCards = report.cards.map((card, index) => {
          if (index !== activeField.index) return card;
          const nextText = card.interpretation
            ? `${card.interpretation}\n${snippet}`
            : snippet;
          return { ...card, interpretation: nextText };
        });
        return { ...report, cards: nextCards };
      });
    }
    if (activeField.type === 'advice') {
      updateReport(activeReport.id, (report) => {
        const nextText = report.overall_advice
          ? `${report.overall_advice}\n${snippet}`
          : snippet;
        return { ...report, overall_advice: nextText };
      });
    }
  };

  const handleSave = () => {
    showToast('ì„ì‹œ ì €ì¥ ì™„ë£Œ');
  };

  const handleSend = () => {
    if (!activeReport) return;
    updateReport(activeReport.id, { status: 'completed' });
    setStatusFilter('completed');
    showToast('ì „ì†¡ ì™„ë£Œ');
  };

  return (
    <div className="page reader">
      <header className="top-bar">
        <div>
          <p className="eyebrow">READER CONSOLE</p>
          <h1>íƒ€ë¡œ ë¦¬ë”© í•´ì„ ì‘ì„±</h1>
          <p className="subtitle">ëŒ€ê¸° ì¤‘ì¸ ìƒë‹´ì„ ì„ íƒí•˜ê³  í•´ì„ì„ ì‘ì„±í•˜ì„¸ìš”.</p>
        </div>
        <div className="top-actions">
          <button className="btn ghost" type="button" onClick={() => navigate('/')}>í™ˆìœ¼ë¡œ</button>
          <button className="btn ghost" type="button" onClick={() => setPreviewOpen(true)}>ë¯¸ë¦¬ë³´ê¸°</button>
        </div>
      </header>

      <div className="reader-grid">
        <section className="panel report-list">
          <div className="panel-header">
            <h2>ìƒë‹´ ëª©ë¡</h2>
            <div className="pill-row">
              <button
                type="button"
                className={`pill ${statusFilter === 'pending' ? 'active' : ''}`}
                onClick={() => setStatusFilter('pending')}
              >
                ëŒ€ê¸° ì¤‘
              </button>
              <button
                type="button"
                className={`pill ${statusFilter === 'completed' ? 'active' : ''}`}
                onClick={() => setStatusFilter('completed')}
              >
                ì™„ë£Œë¨
              </button>
            </div>
          </div>
          <div className="list">
            {filteredReports.length === 0 ? (
              <p className="empty-state">í•´ë‹¹ ìƒíƒœì˜ ìƒë‹´ì´ ì—†ìŠµë‹ˆë‹¤.</p>
            ) : (
              filteredReports.map((report) => (
                <button
                  type="button"
                  className={`list-item ${report.id === activeReport?.id ? 'active' : ''}`}
                  key={report.id}
                  onClick={() => handleSelectReport(report.id)}
                >
                  <div>
                    <p className="list-title">{report.customer_name}</p>
                    <p className="list-meta">{report.request_date}</p>
                    <p className="list-question">{report.question}</p>
                  </div>
                  <span className={`status ${report.status}`}>{report.status === 'pending' ? 'ëŒ€ê¸°' : 'ì™„ë£Œ'}</span>
                </button>
              ))
            )}
          </div>
        </section>

        <section className="panel editor">
          {!activeReport ? (
            <p className="empty-state">ì„ íƒëœ ìƒë‹´ì´ ì—†ìŠµë‹ˆë‹¤.</p>
          ) : (
            <>
              <div className="editor-header">
                <div>
                  <p className="eyebrow">REPORT</p>
                  <h2>{activeReport.customer_name}</h2>
                  <p className="muted">ìš”ì²­ì¼ {activeReport.request_date}</p>
                </div>
                <div className="editor-status">
                  <span className={`status ${activeReport.status}`}>
                    {activeReport.status === 'pending' ? 'ëŒ€ê¸°' : 'ì™„ë£Œ'}
                  </span>
                </div>
              </div>
              <div className="question-box">
                <p className="label">ê³ ê° ì§ˆë¬¸</p>
                <p>{activeReport.question}</p>
              </div>

              <TemplateBar
                templates={templates}
                onApply={handleApplyTemplate}
                onApplyCustom={handleApplyCustomTemplate}
                onSave={handleSaveTemplate}
              />

              <datalist id="position-list">
                {POSITION_SUGGESTIONS.map((item) => (
                  <option value={item} key={item} />
                ))}
              </datalist>

              <div className="editor-cards">
                {activeReport.cards.map((entry, index) => (
                  <CardEditorItem
                    key={`${entry.card_id ?? 'none'}-${index}`}
                    entry={entry}
                    index={index}
                    card={cardsById.get(entry.card_id)}
                    datalistId="position-list"
                    onUpdate={(patch) => updateCardEntry(index, patch)}
                    onRemove={() => removeCardEntry(index)}
                    onSelectCard={() => {
                      setModalTargetIndex(index);
                      setModalOpen(true);
                    }}
                    onFocusField={(field) => setActiveField(field)}
                    dragProps={{
                      draggable: true,
                      onDragStart: (event) => handleDragStart(event, index),
                      onDragOver: handleDragOver,
                      onDrop: (event) => handleDrop(event, index)
                    }}
                  />
                ))}
              </div>

              <button
                className="btn ghost"
                type="button"
                onClick={() => {
                  setModalTargetIndex(null);
                  setModalOpen(true);
                }}
              >
                + ì¹´ë“œ ì¶”ê°€
              </button>

              <label className="field">
                <span>ì¢…í•© ì¡°ì–¸ (ì„ íƒ)</span>
                <textarea
                  value={activeReport.overall_advice}
                  onChange={(event) => updateReport(activeReport.id, { overall_advice: event.target.value })}
                  onFocus={() => setActiveField({ type: 'advice' })}
                  placeholder="ì „ì²´ì ì¸ ì¡°ì–¸ì„ ì…ë ¥í•˜ì„¸ìš”"
                />
              </label>

              <SnippetBar
                snippets={snippets}
                onAdd={(snippet) => setSnippets((prev) => [...prev, snippet])}
                onInsert={handleInsertSnippet}
                onRemove={(index) =>
                  setSnippets((prev) => prev.filter((_, snippetIndex) => snippetIndex !== index))
                }
              />

              <div className="editor-actions">
                <button className="btn ghost" type="button" onClick={handleSave}>ì„ì‹œì €ì¥</button>
                <button className="btn ghost" type="button" onClick={() => setPreviewOpen(true)}>
                  ë¯¸ë¦¬ë³´ê¸°
                </button>
                <button className="btn primary" type="button" onClick={handleSend}>ì „ì†¡</button>
              </div>
            </>
          )}
        </section>
      </div>

      <CardAddModal
        isOpen={isModalOpen}
        onClose={() => setModalOpen(false)}
        onAdd={addCardEntry}
        cards={cardsData}
      />

      {previewOpen && (
        <div className="modal-backdrop" role="presentation" onClick={() => setPreviewOpen(false)}>
          <div
            className="modal preview"
            role="dialog"
            aria-modal="true"
            onClick={(event) => event.stopPropagation()}
          >
            <header className="modal-header">
              <h2>êµ¬ë§¤ì ë¯¸ë¦¬ë³´ê¸°</h2>
              <button className="icon-btn" onClick={() => setPreviewOpen(false)} aria-label="ë‹«ê¸°">âœ•</button>
            </header>
            <BuyerReport report={activeReport} cardsById={cardsById} showHeader={false} onReset={() => {}} />
          </div>
        </div>
      )}

      {toast && <div className="toast">{toast}</div>}
    </div>
  );
}

```

### src/pages/Buyer.jsx
```jsx
import { useMemo } from 'react';
import { useNavigate } from 'react-router-dom';
import cardsData from '../data/cards.json';
import { useReportContext } from '../contexts/ReportContext.jsx';
import BuyerReport from '../components/BuyerReport.jsx';

export default function Buyer() {
  const navigate = useNavigate();
  const { reports, activeReportId, setActiveReportId } = useReportContext();
  const cardsById = useMemo(() => new Map(cardsData.map((card) => [card.id, card])), []);
  const activeReport = reports.find((report) => report.id === activeReportId) || reports[0];

  return (
    <div className="page buyer">
      <header className="top-bar">
        <div>
          <p className="eyebrow">BUYER VIEW</p>
          <h1>íƒ€ë¡œ ë¦¬í¬íŠ¸ í™•ì¸</h1>
          <p className="subtitle">ì¹´ë“œë¥¼ ë’¤ì§‘ê³  í•´ì„ì„ í™•ì¸í•´ë³´ì„¸ìš”.</p>
        </div>
        <div className="top-actions">
          <select
            value={activeReport?.id ?? ''}
            onChange={(event) => setActiveReportId(event.target.value)}
          >
            {reports.map((report) => (
              <option key={report.id} value={report.id}>
                {report.customer_name} Â· {report.request_date}
              </option>
            ))}
          </select>
          <button className="btn ghost" type="button" onClick={() => navigate('/')}>í™ˆìœ¼ë¡œ</button>
        </div>
      </header>

      <BuyerReport report={activeReport} cardsById={cardsById} onReset={() => navigate('/')} />
    </div>
  );
}
```

### src/components/CardAddModal.jsx
```jsx
import { useEffect, useMemo, useState } from 'react';

const CATEGORY_LABELS = {
  all: 'ì „ì²´',
  major: 'ë©”ì´ì € ì•„ë¥´ì¹´ë‚˜',
  wands: 'ì™„ë“œ',
  cups: 'ì»µ',
  swords: 'ì†Œë“œ',
  pentacles: 'íœíƒ€í´'
};

const fallbackSrc =
  'data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"240\" height=\"360\"><rect width=\"100%\" height=\"100%\" fill=\"%23131b2a\"/><text x=\"50%\" y=\"50%\" fill=\"%23aab3c2\" font-size=\"20\" font-family=\"sans-serif\" text-anchor=\"middle\" dominant-baseline=\"middle\">Tarot</text></svg>';

export default function CardAddModal({ isOpen, onClose, onAdd, cards, initialDirection = 'upright' }) {
  const [query, setQuery] = useState('');
  const [category, setCategory] = useState('all');
  const [direction, setDirection] = useState(initialDirection);
  const [selectedId, setSelectedId] = useState(null);

  useEffect(() => {
    if (isOpen) {
      setQuery('');
      setCategory('all');
      setSelectedId(null);
      setDirection(initialDirection);
    }
  }, [isOpen, initialDirection]);

  const filteredCards = useMemo(() => {
    const normalized = query.trim().toLowerCase();
    return cards.filter((card) => {
      const matchesCategory = category === 'all' || card.category === category;
      const matchesQuery = !normalized
        || card.name_en.toLowerCase().includes(normalized)
        || card.name_kr.toLowerCase().includes(normalized);
      return matchesCategory && matchesQuery;
    });
  }, [cards, category, query]);

  if (!isOpen) {
    return null;
  }

  const handleAdd = () => {
    if (selectedId === null) {
      return;
    }
    onAdd(selectedId, direction);
  };

  return (
    <div className="modal-backdrop" role="presentation" onClick={onClose}>
      <div className="modal" role="dialog" aria-modal="true" onClick={(event) => event.stopPropagation()}>
        <header className="modal-header">
          <h2>ì¹´ë“œ ì¶”ê°€</h2>
          <button className="icon-btn" onClick={onClose} aria-label="ë‹«ê¸°">âœ•</button>
        </header>

        <div className="modal-controls">
          <input
            type="search"
            placeholder="ì¹´ë“œ ì´ë¦„ ê²€ìƒ‰"
            value={query}
            onChange={(event) => setQuery(event.target.value)}
          />
          <div className="pill-row">
            {Object.entries(CATEGORY_LABELS).map(([key, label]) => (
              <button
                key={key}
                type="button"
                className={`pill ${category === key ? 'active' : ''}`}
                onClick={() => setCategory(key)}
              >
                {label}
              </button>
            ))}
          </div>
          <div className="direction-toggle">
            <button
              type="button"
              className={`pill ${direction === 'upright' ? 'active' : ''}`}
              onClick={() => setDirection('upright')}
            >
              ì •ë°©í–¥ â–²
            </button>
            <button
              type="button"
              className={`pill ${direction === 'reversed' ? 'active danger' : ''}`}
              onClick={() => setDirection('reversed')}
            >
              ì—­ë°©í–¥ â–¼
            </button>
          </div>
        </div>

        <div className="card-grid">
          {filteredCards.map((card) => (
            <button
              key={card.id}
              type="button"
              className={`card-option ${selectedId === card.id ? 'selected' : ''}`}
              onClick={() => setSelectedId(card.id)}
            >
              <div className="card-thumb">
                <img
                  src={card.image_url}
                  alt={card.name_kr}
                  loading="lazy"
                  onError={(event) => {
                    event.currentTarget.src = fallbackSrc;
                  }}
                />
              </div>
              <div className="card-meta">
                <p className="card-name-kr">{card.name_kr}</p>
                <p className="card-name-en">{card.name_en}</p>
              </div>
            </button>
          ))}
        </div>

        <footer className="modal-footer">
          <button className="btn ghost" onClick={onClose}>ì·¨ì†Œ</button>
          <button className="btn primary" onClick={handleAdd} disabled={selectedId === null}>ì¶”ê°€</button>
        </footer>
      </div>
    </div>
  );
}
```

### src/components/CardEditorItem.jsx
```jsx
const fallbackSrc =
  'data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"240\" height=\"360\"><rect width=\"100%\" height=\"100%\" fill=\"%23131b2a\"/><text x=\"50%\" y=\"50%\" fill=\"%23aab3c2\" font-size=\"20\" font-family=\"sans-serif\" text-anchor=\"middle\" dominant-baseline=\"middle\">Tarot</text></svg>';

export default function CardEditorItem({
  entry,
  index,
  card,
  datalistId,
  dragProps,
  onUpdate,
  onRemove,
  onSelectCard,
  onFocusField
}) {
  const directionLabel = entry.direction === 'reversed' ? 'ì—­ë°©í–¥ â–¼' : 'ì •ë°©í–¥ â–²';

  return (
    <div className="editor-card" {...dragProps}>
      <div className="editor-card-header">
        <div className="drag-handle" title="ë“œë˜ê·¸í•˜ì—¬ ìˆœì„œ ë³€ê²½">â‹®â‹®</div>
        <div>
          <p className="card-index">ì¹´ë“œ {index + 1}</p>
          <p className="card-subtitle">ìœ„ì¹˜ ì˜ë¯¸ì™€ í•´ì„ì„ ì‘ì„±í•˜ì„¸ìš”</p>
        </div>
        <button className="icon-btn danger" type="button" onClick={onRemove}>ì‚­ì œ</button>
      </div>

      <div className="editor-card-body">
        <label className="field">
          <span>ìœ„ì¹˜ ì˜ë¯¸</span>
          <input
            list={datalistId}
            value={entry.position}
            onChange={(event) => onUpdate({ position: event.target.value })}
            placeholder="ì˜ˆ: ê³¼ê±°, í˜„ì¬, ë¯¸ë˜"
          />
        </label>

        <div className="card-visual">
          <div className={`card-preview ${card ? '' : 'empty'}`}>
            {card ? (
              <img
                src={card.image_url}
                alt={card.name_kr}
                loading="lazy"
                onError={(event) => {
                  event.currentTarget.src = fallbackSrc;
                }}
              />
            ) : (
              <div className="placeholder">ì¹´ë“œë¥¼ ì„ íƒí•˜ì„¸ìš”</div>
            )}
          </div>
          <div>
            <p className="card-title">{card ? card.name_kr : 'ë¯¸ì„ íƒ'}</p>
            <p className="card-title-en">{card ? card.name_en : 'No card selected'}</p>
            <div className="card-actions">
              <button className="btn ghost" type="button" onClick={onSelectCard}>ì¹´ë“œ ì„ íƒ</button>
              <button
                className={`btn ${entry.direction === 'reversed' ? 'danger' : 'ghost'}`}
                type="button"
                onClick={() =>
                  onUpdate({ direction: entry.direction === 'reversed' ? 'upright' : 'reversed' })
                }
              >
                {directionLabel}
              </button>
            </div>
          </div>
        </div>

        <label className="field">
          <span>í•´ì„</span>
          <textarea
            value={entry.interpretation}
            onChange={(event) => onUpdate({ interpretation: event.target.value })}
            onFocus={() => onFocusField({ type: 'card', index })}
            placeholder="í•´ì„ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”"
          />
        </label>
      </div>
    </div>
  );
}
```

### src/components/TemplateBar.jsx
```jsx
import { useState } from 'react';

const CUSTOM_TEMPLATE = 'ì‚¬ìš©ì ì§€ì •';

export default function TemplateBar({ templates, onApply, onApplyCustom, onSave }) {
  const [selected, setSelected] = useState(templates[0]?.name ?? CUSTOM_TEMPLATE);

  const handleApply = () => {
    if (!selected) {
      return;
    }
    if (selected === CUSTOM_TEMPLATE) {
      onApplyCustom?.();
      return;
    }
    onApply(selected);
  };

  return (
    <div className="template-bar">
      <div>
        <p className="section-title">ìŠ¤í”„ë ˆë“œ í…œí”Œë¦¿</p>
        <p className="section-subtitle">ìì£¼ ì“°ëŠ” í¬ì§€ì…˜ì„ ë¹ ë¥´ê²Œ ì ìš©í•˜ì„¸ìš”.</p>
      </div>
      <div className="template-controls">
        <select value={selected} onChange={(event) => setSelected(event.target.value)}>
          <option value={CUSTOM_TEMPLATE}>{CUSTOM_TEMPLATE}</option>
          {templates.map((template) => (
            <option key={template.name} value={template.name}>
              {template.name}
            </option>
          ))}
        </select>
        <button className="btn ghost" type="button" onClick={handleApply}>ë¶ˆëŸ¬ì˜¤ê¸°</button>
        <button className="btn ghost" type="button" onClick={onSave}>í˜„ì¬ ìŠ¤í”„ë ˆë“œ ì €ì¥</button>
      </div>
    </div>
  );
}

```

### src/components/SnippetBar.jsx
```jsx
import { useState } from 'react';

export default function SnippetBar({ snippets, onAdd, onInsert, onRemove }) {
  const [text, setText] = useState('');

  const handleAdd = () => {
    const trimmed = text.trim();
    if (!trimmed) {
      return;
    }
    onAdd(trimmed);
    setText('');
  };

  return (
    <div className="snippet-bar">
      <div>
        <p className="section-title">ìì£¼ ì“°ëŠ” ë¬¸êµ¬</p>
        <p className="section-subtitle">í•´ì„ ì‘ì„± ì†ë„ë¥¼ ë†’ì´ëŠ” ì¦ê²¨ì°¾ê¸° ë¬¸êµ¬ì…ë‹ˆë‹¤.</p>
      </div>
      <div className="snippet-input">
        <input
          type="text"
          value={text}
          onChange={(event) => setText(event.target.value)}
          placeholder="ì˜ˆ: ê°ì •ì„ ì†”ì§íˆ í‘œí˜„í•˜ë©´ ë„ì›€ì´ ë©ë‹ˆë‹¤"
        />
        <button className="btn ghost" type="button" onClick={handleAdd}>ì¶”ê°€</button>
      </div>
      <div className="snippet-list">
        {snippets.length === 0 ? (
          <p className="empty-state">ì €ì¥ëœ ë¬¸êµ¬ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
        ) : (
          snippets.map((snippet, index) => (
            <div className="snippet-item" key={`${snippet}-${index}`}>
              <span>{snippet}</span>
              <div className="snippet-actions">
                <button className="btn ghost" type="button" onClick={() => onInsert(snippet)}>ì‚½ì…</button>
                <button className="btn ghost danger" type="button" onClick={() => onRemove(index)}>ì‚­ì œ</button>
              </div>
            </div>
          ))
        )}
      </div>
    </div>
  );
}
```

### src/components/BuyerReport.jsx
```jsx
import { useEffect, useMemo, useState } from 'react';

const fallbackCard = {
  name_kr: 'ì•Œ ìˆ˜ ì—†ìŒ',
  name_en: 'Unknown',
  image_url: ''
};

const fallbackSrc =
  'data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"240\" height=\"360\"><rect width=\"100%\" height=\"100%\" fill=\"%23131b2a\"/><text x=\"50%\" y=\"50%\" fill=\"%23aab3c2\" font-size=\"20\" font-family=\"sans-serif\" text-anchor=\"middle\" dominant-baseline=\"middle\">Tarot</text></svg>';

export default function BuyerReport({ report, cardsById, showHeader = true, onReset }) {
  const [flipped, setFlipped] = useState({});
  const [expanded, setExpanded] = useState({});

  useEffect(() => {
    setFlipped({});
    setExpanded({});
  }, [report?.id]);

  const layoutClass = useMemo(() => {
    if (!report) return 'layout-many';
    if (report.cards.length === 1) return 'layout-one';
    if (report.cards.length === 3) return 'layout-three';
    return 'layout-many';
  }, [report]);

  if (!report) {
    return (
      <div className="panel">
        <p className="empty-state">ë¦¬í¬íŠ¸ë¥¼ ì„ íƒí•´ ì£¼ì„¸ìš”.</p>
      </div>
    );
  }

  const spreadInfo = report.spread_name || `${report.cards.length}ì¥ ìŠ¤í”„ë ˆë“œ`;

  const handleToggleAll = () => {
    const allFlipped = report.cards.every((_, index) => flipped[index]);
    const nextState = {};
    report.cards.forEach((_, index) => {
      nextState[index] = !allFlipped;
    });
    setFlipped(nextState);
  };

  const handleShare = async () => {
    const shareData = {
      title: 'íƒ€ë¡œ ë¦¬í¬íŠ¸',
      text: `${report.customer_name}ë‹˜ì˜ íƒ€ë¡œ ë¦¬í¬íŠ¸ì…ë‹ˆë‹¤.`,
      url: window.location.href
    };

    try {
      if (navigator.share) {
        await navigator.share(shareData);
      } else if (navigator.clipboard) {
        await navigator.clipboard.writeText(window.location.href);
        alert('ë§í¬ë¥¼ ë³µì‚¬í–ˆìŠµë‹ˆë‹¤.');
      }
    } catch (error) {
      alert('ê³µìœ ë¥¼ ì™„ë£Œí•˜ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.');
    }
  };

  return (
    <div className="buyer-report">
      {showHeader && (
        <header className="report-header">
          <div>
            <p className="eyebrow">REPORT</p>
            <h2>{report.customer_name}ë‹˜ì˜ ìƒë‹´ ë¦¬í¬íŠ¸</h2>
            <p className="muted">ìƒë‹´ì¼ {report.request_date} Â· {spreadInfo}</p>
          </div>
          <div className="header-actions">
            <button className="btn ghost" type="button" onClick={handleToggleAll}>
              {report.cards.every((_, index) => flipped[index]) ? 'ëª¨ë‘ ì ‘ê¸°' : 'ëª¨ë‘ í¼ì¹˜ê¸°'}
            </button>
          </div>
        </header>
      )}

      <section className={`card-layout ${layoutClass}`}>
        {report.cards.map((entry, index) => {
          const card = cardsById.get(entry.card_id) || fallbackCard;
          const isFlipped = Boolean(flipped[index]);
          const isExpanded = Boolean(expanded[index]);
          const directionLabel = entry.direction === 'reversed' ? 'ì—­ë°©í–¥ â–¼' : 'ì •ë°©í–¥ â–²';

          return (
            <article className="buyer-card" key={`${entry.card_id ?? 'none'}-${index}`}>
              <div
                className={`flip-card ${isFlipped ? 'is-flipped' : ''}`}
                onClick={() => setFlipped((prev) => ({ ...prev, [index]: !prev[index] }))}
              >
                <div className="flip-card-inner">
                  <div className="flip-card-face back">
                    <div className="card-back">TAROT</div>
                  </div>
                  <div className="flip-card-face front">
                    {card.image_url ? (
                      <img
                        src={card.image_url}
                        alt={card.name_kr}
                        loading="lazy"
                        onError={(event) => {
                          event.currentTarget.src = fallbackSrc;
                        }}
                      />
                    ) : (
                      <div className="card-front-fallback">ì¹´ë“œ ì´ë¯¸ì§€</div>
                    )}
                  </div>
                </div>
              </div>

              <div className="buyer-card-meta">
                <span className="position">ğŸ“ {entry.position || 'í¬ì§€ì…˜'}</span>
                <span className={`direction ${entry.direction === 'reversed' ? 'rev' : 'up'}`}>
                  {directionLabel}
                </span>
              </div>
              <p className="card-title">{card.name_kr}</p>
              <p className="card-title-en">{card.name_en}</p>

              <button
                className="btn primary"
                type="button"
                onClick={() => setExpanded((prev) => ({ ...prev, [index]: !prev[index] }))}
                disabled={!isFlipped}
              >
                ëˆŒëŸ¬ë³´ê¸° ğŸ‘‡
              </button>

              <div className={`interpretation ${isExpanded ? 'open' : ''}`}>
                <p>{entry.interpretation || 'í•´ì„ì´ ì•„ì§ ì‘ì„±ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.'}</p>
              </div>
            </article>
          );
        })}
      </section>

      {report.overall_advice && (
        <section className="advice-box">
          <h3>ì¢…í•© ì¡°ì–¸</h3>
          <p>{report.overall_advice}</p>
        </section>
      )}

      <div className="report-actions">
        <button className="btn ghost" type="button" onClick={handleShare}>ê³µìœ í•˜ê¸°</button>
        <button className="btn ghost" type="button" onClick={onReset}>ì²˜ìŒìœ¼ë¡œ</button>
      </div>
    </div>
  );
}
```

---

## 8. ì„ íƒì  ê°œì„  ì œì•ˆ

### 8-1. ì´ë¯¸ì§€ ìµœì í™” (ì‹¤ì œ WebP íŒŒì¼ ì¶”ê°€)
- **ëª©í‘œ**: ì¹´ë“œ ì´ë¯¸ì§€ ë¡œë”© ì†ë„ ê°œì„ 
- **êµ¬í˜„ ì‚¬í•­**
  - `/public/images/tarot/` ë””ë ‰í† ë¦¬ì— WebP í¬ë§· ì¹´ë“œ ì´ë¯¸ì§€ ë°°ì¹˜
  - ì´ë¯¸ì§€ ìµœì í™” ë„êµ¬ í™œìš© (ì˜ˆ: ImageMagick, Sharp)
    ```bash
    # ì˜ˆì‹œ: PNGë¥¼ WebPë¡œ ë³€í™˜
    magick input.png -quality 80 output.webp
    ```
  - srcset ë° picture íƒœê·¸ í™œìš© (ì˜µì…˜)
    ```jsx
    <picture>
      <source srcSet={card.image_url_webp} type="image/webp" />
      <source srcSet={card.image_url_png} type="image/png" />
      <img src={card.image_url_png} alt={card.name_kr} />
    </picture>
    ```
  - ì´ë¯¸ì§€ ì§€ì—° ë¡œë”© (loading="lazy") ì´ë¯¸ ì ìš©ë¨ âœ…

### 8-2. ê²€ìƒ‰ ê¸°ëŠ¥ í™•ì¥ (ì¹´í…Œê³ ë¦¬ êµì°¨ ê²€ìƒ‰)
- **ëª©í‘œ**: ì‚¬ìš©ì ê²€ìƒ‰ ê²½í—˜ ê°œì„ 
- **êµ¬í˜„ ì‚¬í•­**
  - ê²€ìƒ‰ì–´ë¡œ ì—¬ëŸ¬ ì¹´í…Œê³ ë¦¬ì—ì„œ ë™ì‹œ ê²€ìƒ‰
  - ê²€ìƒ‰ ê²°ê³¼ì— "ìµœê·¼ ê²€ìƒ‰" íˆìŠ¤í† ë¦¬ ì¶”ê°€
  - ìë™ì™„ì„± ê¸°ëŠ¥ (Autocomplete)
    ```jsx
    const handleSearch = (query) => {
      // ì…ë ¥ ì¤‘ ì‹¤ì‹œê°„ ì¶”ì²œ
      const suggestions = cardsData.filter(card =>
        card.name_kr.includes(query) || card.name_en.toLowerCase().includes(query)
      );
      setSuggestions(suggestions);
    };
    ```
  - ê²€ìƒ‰ ê²°ê³¼ ì •ë ¬ ì˜µì…˜ (ê°€ë‚˜ë‹¤ìˆœ, ì¹´í…Œê³ ë¦¬ìˆœ, ê´€ë ¨ë„ìˆœ)

### 8-3. ë¦¬í¬íŠ¸ ë³µì œ ê¸°ëŠ¥
- **ëª©í‘œ**: ë¦¬ë” ì‘ì—… íš¨ìœ¨ì„± í–¥ìƒ
- **êµ¬í˜„ ì‚¬í•­**
  - ê¸°ì¡´ ë¦¬í¬íŠ¸ ë³µì œ ë²„íŠ¼ ì¶”ê°€
    ```jsx
    const handleDuplicateReport = (reportId) => {
      const original = reports.find(r => r.id === reportId);
      const duplicated = {
        ...original,
        id: `report_${Date.now()}`,
        customer_name: `${original.customer_name} (ë³µì‚¬ë³¸)`,
        request_date: new Date().toISOString().split('T')[0],
        status: 'pending'
      };
      replaceReports([...reports, duplicated]);
    };
    ```
  - ë³µì œ ì‹œ ìƒë‹´ ëª©ë¡ì— ìƒˆ í•­ëª©ìœ¼ë¡œ ì¶”ê°€
  - ìˆ˜ì • ì „ ì„ íƒì  í•„ë“œ ì´ˆê¸°í™” ì˜µì…˜

### 8-4. í´ë¼ìš°ë“œ ë™ê¸°í™” (Firebase/Supabase)
- **ëª©í‘œ**: ë°ì´í„° ì˜ì†ì„± ë° ë©€í‹° ë””ë°”ì´ìŠ¤ ì§€ì›
- **êµ¬í˜„ ì‚¬í•­**
  
  **Firebase ì„ íƒ ì‹œ:**
  ```jsx
  import { initializeApp } from 'firebase/app';
  import { getFirestore, collection, getDocs, setDoc, doc } from 'firebase/firestore';

  const firebaseConfig = {
    apiKey: process.env.REACT_APP_FIREBASE_API_KEY,
    projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,
    // ... ê¸°íƒ€ ì„¤ì •
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  // ë¦¬í¬íŠ¸ ë™ê¸°í™”
  const syncReports = async () => {
    const querySnapshot = await getDocs(collection(db, 'reports'));
    const reports = querySnapshot.docs.map(doc => ({
      id: doc.id,
      ...doc.data()
    }));
    setReports(reports);
  };
  ```

  **Supabase ì„ íƒ ì‹œ:**
  ```jsx
  import { createClient } from '@supabase/supabase-js';

  const supabase = createClient(
    process.env.REACT_APP_SUPABASE_URL,
    process.env.REACT_APP_SUPABASE_KEY
  );

  // ë¦¬í¬íŠ¸ ë™ê¸°í™”
  const syncReports = async () => {
    const { data, error } = await supabase
      .from('reports')
      .select('*');
    if (!error) setReports(data);
  };

  // ì‹¤ì‹œê°„ êµ¬ë…
  supabase
    .from('reports')
    .on('*', payload => {
      console.log('Change received!', payload);
      syncReports(); // ë³€ê²½ ê°ì§€ ì‹œ ì¬ë™ê¸°í™”
    })
    .subscribe();
  ```

  - **ì£¼ìš” ê¸°ëŠ¥**
    - ë¡œê·¸ì¸/íšŒì›ê°€ì… (ì¸ì¦ ì‹œìŠ¤í…œ)
    - ë¦¬í¬íŠ¸ CRUD ì‘ì—…
    - ì‹¤ì‹œê°„ ë°ì´í„° ë™ê¸°í™”
    - ì˜¤í”„ë¼ì¸ ëª¨ë“œ ì§€ì› (ë¡œì»¬ ìºì‹±)
    - ì¶©ëŒ í•´ê²° ì „ëµ

  - **Database ìŠ¤í‚¤ë§ˆ ì˜ˆì‹œ**
    ```sql
    -- Reports í…Œì´ë¸”
    CREATE TABLE reports (
      id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
      user_id UUID NOT NULL REFERENCES auth.users,
      customer_name VARCHAR(255),
      request_date DATE,
      question TEXT,
      status VARCHAR(20), -- 'pending' | 'completed'
      spread_name VARCHAR(255),
      cards JSONB,
      overall_advice TEXT,
      created_at TIMESTAMP DEFAULT NOW(),
      updated_at TIMESTAMP DEFAULT NOW()
    );

    -- ì¸ë±ì‹±
    CREATE INDEX idx_reports_user_id ON reports(user_id);
    CREATE INDEX idx_reports_status ON reports(status);
    ```

---

## 9. ì²´í¬ë¦¬ìŠ¤íŠ¸

### ì™„ë£Œëœ ê¸°ëŠ¥
- [x] íƒ€ë¡œ ë¦¬ë”© í•´ì„ ì‘ì„± ê¸°ëŠ¥
- [x] êµ¬ë§¤ì ê²°ê³¼ í™•ì¸ í˜ì´ì§€
- [x] ì¹´ë“œ ë’¤ì§‘ê¸° ì• ë‹ˆë©”ì´ì…˜
- [x] í•´ì„ í¼ì¹¨ ê¸°ëŠ¥
- [x] ê³µìœ  ê¸°ëŠ¥ (Web Share API)
- [x] ë“œë˜ê·¸ì•¤ë“œë¡­ ì¹´ë“œ ìˆœì„œ ë³€ê²½
- [x] ìŠ¤í”„ë ˆë“œ í…œí”Œë¦¿ ì €ì¥/ë¶ˆëŸ¬ì˜¤ê¸°
- [x] ìì£¼ ì“°ëŠ” ë¬¸êµ¬ ì €ì¥
- [x] ë¯¸ë¦¬ë³´ê¸° ëª¨ë‹¬
- [x] ëª¨ë°”ì¼ ë°˜ì‘í˜• ë””ìì¸

### ì„ íƒì  ê°œì„  (í–¥í›„ ê°œë°œ ì˜ˆì •)
- [ ] ì´ë¯¸ì§€ ìµœì í™” (ì‹¤ì œ WebP íŒŒì¼ ì¶”ê°€)
- [ ] ê²€ìƒ‰ ê¸°ëŠ¥ í™•ì¥ (ì¹´í…Œê³ ë¦¬ êµì°¨ ê²€ìƒ‰)
- [ ] ë¦¬í¬íŠ¸ ë³µì œ ê¸°ëŠ¥
- [ ] í´ë¼ìš°ë“œ ë™ê¸°í™” (Firebase/Supabase)

## 10. ì‘ì—… ë‚´ì—­
### 2026-01-15
- ì¹´ë“œ ë°ì´í„° 78ì¥ ì „ì²´ êµ¬ì„± ë° Sacred Texts ì´ë¯¸ì§€ URL ì ìš©
- ì¹´ë“œ ID ì¶©ëŒ ìˆ˜ì •(ì†Œë“œ/íœíƒ€í´ ì¶©ëŒ ë°©ì§€)
- ë¦¬ë” í™”ë©´: ê³ ê° ì´ë¦„/ì§ˆë¬¸ ì…ë ¥ í•„ë“œ ì¶”ê°€
- êµ¬ë§¤ì í™”ë©´: í‚¤ì›Œë“œ ë°°ì§€ ì¹´ë“œ ìƒë‹¨ ê³ ì •, ì´ëª¨ì§€ ğŸ”® ì ìš©
- í•´ì„ë³´ê¸° ë²„íŠ¼ìœ¼ë¡œ í•´ì„ ë…¸ì¶œ(í´ë¦­ í›„ í¼ì¹¨)
- ê³µìœ  ë§í¬ ìƒì„±/ë³µì‚¬ UI ì¶”ê°€, /share/:token í˜ì´ì§€ êµ¬ì„±
- Supabase ì—°ë™(í´ë¼ì´ì–¸íŠ¸, ë¦¬í¬íŠ¸ ì €ì¥/ë¶ˆëŸ¬ì˜¤ê¸°, share_token) + í…Œì´ë¸”ëª… tarot_reports
- ë¡œê·¸ì¸/ê´€ë¦¬ì ì œí•œ(ProtectedRoute, Login, VITE_ADMIN_EMAIL)
- ë¸Œëœë“œ íƒ€ì´í‹€ â€œê²°ìŒ¤ íƒ€ë¡œ ë¦¬í¬íŠ¸â€ ë°˜ì˜
